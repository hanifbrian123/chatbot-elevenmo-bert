<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Chatbot Profesional</title>

<style>
    body {
        margin: 0;
        background: #e9ebee;
        font-family: "Segoe UI", Arial, sans-serif;
        display: flex;
        justify-content: center;
        padding: 30px;
    }

    #container {
        width: 100%;
        max-width: 600px;
        background: white;
        border-radius: 12px;
        box-shadow: 0px 4px 15px rgba(0,0,0,0.15);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 90vh;
    }

    #header {
        padding: 15px;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        background: #4CAF50;
        color: white;
    }

    #chatbox {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        background: #f7f7f7;
    }

    .msg-row {
        display: flex;
        margin-bottom: 15px;
        align-items: flex-start;
    }

    .msg-row.user {
        justify-content: flex-end;
    }

    .msg-bubble {
        max-width: 70%;
        padding: 12px 16px;
        border-radius: 14px;
        font-size: 15px;
        line-height: 1.4;
    }

    /* Bubble user */
    .msg-row.user .msg-bubble {
        background: #0084ff;
        color: white;
        border-bottom-right-radius: 4px;
    }

    /* Bubble bot */
    .msg-row.bot .msg-bubble {
        background: #e0e0e0;
        color: black;
        border-bottom-left-radius: 4px;
    }

    .avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        margin-right: 10px;
    }

    .msg-row.user .avatar {
        display: none;
    }

    #inputBox {
        padding: 15px;
        display: flex;
        background: white;
        border-top: 1px solid #ccc;
    }

    #msg {
        flex: 1;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 15px;
    }

    button {
        margin-left: 10px;
        padding: 12px 20px;
        border: none;
        background: #4CAF50;
        color: white;
        border-radius: 8px;
        font-size: 15px;
        cursor: pointer;
    }

    button:hover {
        background: #45a049;
    }
</style>

</head>
<body>

<div id="container">

    <div id="header">Chatbot AI - Elevenmo.com</div>

    <div id="chatbox"></div>

    <div id="inputBox">
        <input id="msg" type="text" placeholder="Ketik pesan..." />
        <button onclick="sendMsg()">Kirim</button>
    </div>
</div>

<script>
const API_URL = "http://34.66.169.78:8000/chat";

// Tambahkan pesan ke UI
function addMessage(text, sender) {
    let chatbox = document.getElementById("chatbox");

    let row = document.createElement("div");
    row.className = "msg-row " + sender;

    let avatar = document.createElement("img");
    avatar.className = "avatar";
    avatar.src = sender === "bot"
        ? "./img/bot.png"
        : "./img/user.png";

    let bubble = document.createElement("div");
    bubble.className = "msg-bubble";
    bubble.textContent = text;

    if (sender === "bot") row.appendChild(avatar);
    row.appendChild(bubble);

    chatbox.appendChild(row);
    chatbox.scrollTop = chatbox.scrollHeight;
}

async function sendMsg() {
    let userText = document.getElementById("msg").value;
    if (!userText.trim()) return;

    addMessage(userText, "user");
    document.getElementById("msg").value = "";

    // Kirim ke server
    let response = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: userText })
    });

    let data = await response.json();
    console.log(data.response);
    addMessage(data.response, "bot");
}
</script>

</body>
</html>
